{"version":3,"sources":["../../src/utilities/writeIndex.js"],"names":["directoryPaths","options","sortedDirectoryPaths","filter","directoryPath","outputFile","silent","ignoreUnsafe","_","forEach","config","optionsWithConfig","Object","assign","siblings","indexCode","indexFilePath","path","resolve","fs","writeFileSync"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;eAEe,kBAACA,cAAD,EAAkC;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;AAC/C,QAAMC,oBAAoB,GAAG,0BAAYF,cAAZ,EAC1BG,MAD0B,CAClBC,aAAD,IAAmB;AACzB,WAAO,sCAAwBA,aAAxB,EAAuC;AAACC,MAAAA,UAAU,EAAEJ,OAAO,CAACI,UAArB;AAC5CC,MAAAA,MAAM,EAAEL,OAAO,CAACM;AAD4B,KAAvC,CAAP;AAED,GAJ0B,CAA7B;;AAMAC,kBAAEC,OAAF,CAAUP,oBAAV,EAAiCE,aAAD,IAAmB;AACjD,UAAMM,MAAM,GAAG,8BAAgBN,aAAhB,EAA+BH,OAA/B,CAAf;AACA,UAAMU,iBAAiB,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBZ,OAAlB,EAA2B;AAACS,MAAAA;AAAD,KAA3B,CAA1B;AACA,UAAMI,QAAQ,GAAG,4BAAcV,aAAd,EAA6BO,iBAA7B,CAAjB;AACA,UAAMI,SAAS,GAAG,8BAAgBD,QAAhB,EAA0BH,iBAA1B,CAAlB;;AACA,UAAMK,aAAa,GAAGC,cAAKC,OAAL,CAAad,aAAb,EAA4BH,OAAO,CAACI,UAAR,IAAsB,UAAlD,CAAtB;;AAEAc,gBAAGC,aAAH,CAAiBJ,aAAjB,EAAgCD,SAAhC;AACD,GARD;AASD,C","sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport _ from 'lodash';\nimport createIndexCode from './createIndexCode';\nimport validateTargetDirectory from './validateTargetDirectory';\nimport readDirectory from './readDirectory';\nimport readIndexConfig from './readIndexConfig';\nimport sortByDepth from './sortByDepth';\n\nexport default (directoryPaths, options = {}) => {\n  const sortedDirectoryPaths = sortByDepth(directoryPaths)\n    .filter((directoryPath) => {\n      return validateTargetDirectory(directoryPath, {outputFile: options.outputFile,\n        silent: options.ignoreUnsafe});\n    });\n\n  _.forEach(sortedDirectoryPaths, (directoryPath) => {\n    const config = readIndexConfig(directoryPath, options);\n    const optionsWithConfig = Object.assign({}, options, {config});\n    const siblings = readDirectory(directoryPath, optionsWithConfig);\n    const indexCode = createIndexCode(siblings, optionsWithConfig);\n    const indexFilePath = path.resolve(directoryPath, options.outputFile || 'index.js');\n\n    fs.writeFileSync(indexFilePath, indexCode);\n  });\n};\n"],"file":"writeIndex.js"}